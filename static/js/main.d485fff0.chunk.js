(this["webpackJsonpreact-hsl"]=this["webpackJsonpreact-hsl"]||[]).push([[0],{12:function(t,e,n){},13:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var s=n(1),r=n.n(s),a=n(3),i=n.n(a),o=(n(12),n(4)),c=n(5),h=n(7),l=n(6);n(13);function d(){var t=new Date,e=t.getMinutes(),n="";return e<10&&(n="0"),t.getHours()+":"+n+e}var u=n(0);function p(t){return t.charAt(0)+t.slice(1).toLowerCase()}var m=function(t){Object(h.a)(n,t);var e=Object(l.a)(n);function n(t){var s;return Object(o.a)(this,n),(s=e.call(this,t)).updateTimetables=function(){s.getTimetables(),s.setState({timestamp:d()})},s.getTimetables=function(){fetch("https://api.digitransit.fi/routing/v1/routers/hsl/index/graphql",{method:"POST",headers:{"Content-Type":"application/graphql"},body:"{ plan(\n    from: {lat: 60.2716403915943, lon: 24.84663514090327}\n    to: {lat: 60.169301684811906, lon: 24.93325791874904}\n    numItineraries: 6\n    transportModes: [{mode: BUS}, {mode: RAIL}, {mode:TRAM}, {mode: SUBWAY}, {mode:WALK}]\n  ) {\n    itineraries{\n      walkDistance,\n      duration,\n      legs {\n        mode\n        startTime\n        endTime\n        from {\n          name\n          stop {\n            code\n            name\n          }\n        },\n        to {\n          name\n        },\n        trip {\n          tripHeadsign\n          routeShortName\n        },\n        distance\n      }\n    }\n  }\n}"}).then((function(t){return t.json()})).then((function(t){for(var e=t.data.plan.itineraries,n=[],r=[],a=[],i=[],o=[],c=[],h=0;h<e.length;h++){n.push(p(e[h].legs[0].mode));var l=new Date(e[h].legs[0].startTime),d=l.getHours(),u="0"+l.getMinutes();r.push(d+":"+u.substr(-2)),o.push(e[h].legs[0].to.name),e[h].legs.length>1?(a.push(p(e[h].legs[1].mode)),d=(l=new Date(e[h].legs[1].startTime)).getHours(),u="0"+l.getMinutes(),i.push(d+":"+u.substr(-2)),c.push(e[h].legs[1].trip.routeShortName+", "+e[h].legs[1].trip.tripHeadsign)):(a.push("End"),i.push("End"),c.push("End"))}s.setState({start:n,startTimes:r,destinations:o,next:a,nextTimes:i,transIDs:c})}))},s.createTable=function(){for(var t=[],e=0;e<s.state.start.length;e++){var n=[];n.push(Object(u.jsx)("td",{children:s.state.startTimes[e]})),n.push(Object(u.jsx)("td",{children:s.state.start[e]})),n.push(Object(u.jsx)("td",{children:s.state.destinations[e]})),n.push(Object(u.jsx)("td",{children:s.state.nextTimes[e]})),n.push(Object(u.jsx)("td",{children:s.state.next[e]})),n.push(Object(u.jsx)("td",{children:s.state.transIDs[e]})),t.push(Object(u.jsx)("tr",{children:n}))}return t},s.state={start:[],startTimes:[],destinations:[],next:[],nextTimes:[],transIDs:[],timestamp:""},s}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.updateTimetables()}},{key:"render",value:function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/uikit@3.3.0/dist/css/uikit.min.css"}),Object(u.jsx)("h1",{children:"Kuohukuja public transport timetable"}),Object(u.jsxs)("h2",{children:["Current time: ",this.state.timestamp]}),Object(u.jsx)("button",{onClick:this.updateTimetables,children:"Update"}),Object(u.jsxs)("table",{className:"uk-table-striped",align:"center",children:[Object(u.jsx)("caption",{}),Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Leave home"}),Object(u.jsx)("th",{children:"Method"}),Object(u.jsx)("th",{children:"Transportation from"}),Object(u.jsx)("th",{children:"Departure time"}),Object(u.jsx)("th",{children:"Transportation method"}),Object(u.jsx)("th",{children:"Transportation ID"})]})}),Object(u.jsx)("tbody",{children:this.createTable()})]})]})}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(u.jsx)(m,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.d485fff0.chunk.js.map